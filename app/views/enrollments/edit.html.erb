<h1>授業編集</h1>

<%= link_to '戻る', :back, class: 'btn btn-secondary mb-3' %>

<h2>授業一覧</h2>

<% lectures = Lecture.where(day: @enrollment.lecture.day, period: @enrollment.lecture.period, semester: @enrollment.lecture.semester) %>

<% if lectures.present? %>
  <ul>
    <% lectures.each do |lecture| %>
      <li>
        <%= lecture.name %>
      </li>
    <% end %>
  </ul>

  <h3>授業を選択して編集</h3>
  <%= form_with(model: @enrollment, url: enrollment_path(@enrollment), method: :patch) do |form| %>
    <%= form.hidden_field :day, value: @enrollment.lecture.day %>
    <%= form.hidden_field :period, value: @enrollment.lecture.period %>
    <%= form.hidden_field :semester, value: @enrollment.lecture.semester %>
    
    <div class="form-group">
      <%= form.label :lecture_id, '授業名' %>
      <%= form.collection_select :lecture_id, lectures, :id, :name, prompt: '授業を選択してください', class: 'form-control' %>
    </div>
    
    <%= form.submit '更新する', class: 'btn btn-primary' %>
  <% end %>

<% else %>
  <p>該当する授業がありません。</p>
<% end %>